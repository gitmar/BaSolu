@page "/entityeditor"
<!-- Pages/EntityEditor.razor -->
<Tabs>
    <Tab Title="Parent Details">
        <Content>
        <ParentForm Model="@Parent"
                    OnSave="SaveParent"
                    OnReset="ResetParent" />
        </Content>
    </Tab>
    <Tab Title="Children">
        <Content>
        <ChildEntityList Items="@Parent.Children"
                         OnAdd="AddChild"
                         OnEdit="EditChild"
                         OnDelete="DeleteChild" />
        </Content>
    </Tab>
</Tabs>

@code {
    private ParentDto Parent = new();

    private void SaveParent() { /* persist logic */ }
    private void ResetParent() => Parent = new();

    private void AddChild() => Parent.Children.Add(new ChildDto { Id = CalcChildId(), ParentId = Parent.Id });
    private void EditChild(ChildDto child) { /* handled in ChildEntityList */ }
    private void DeleteChild(ChildDto child) => Parent.Children.Remove(child);
    private int CalcChildId()
    {
        int isuit = 0;
        isuit = Parent.Children.Max(u => u.Id) + 1;
        return isuit;
    }
}
