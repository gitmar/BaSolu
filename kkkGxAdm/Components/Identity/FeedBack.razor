@page "/feedback"
@inject NavigationManager Nav

<div class="text-center mt-5">
    @if (status == "success")
    {
        <h2 class="text-success">✅ @message</h2>
    }
    else if (status == "error")
    {
        <h2 class="text-danger">❌ @message</h2>
    }
    else
    {
        <h2>ℹ️ @message</h2>
    }
</div>

@code {
    private string? status;
    private string? message;

    protected override void OnInitialized()
    {
        var uri = Nav.ToAbsoluteUri(Nav.Uri);
        var query = Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri.Query);

        if (query.TryGetValue("status", out var s)) status = s;
        if (query.TryGetValue("msg", out var m))
        {
            var msgString = m.ToString(); // convert StringValues to string
            message = msgString switch
            {
                "UserNotFound" => "Utilisateur introuvable.",
                "EmailConfirmed" => "Votre email a été confirmé avec succès. Vous pouvez maintenant vous connecter.",
                "InvalidOrExpiredToken" => "Le lien de confirmation est invalide ou expiré.",
                _ => msgString
            };
        }

    }
}

